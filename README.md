# Анализ данных eCommerce

## Описание проекта

Данный проект представляет собой аналитическое исследование данных о покупках на платформе Olist. 

В рамках проекта были поставлены и решены следующие задачи:

* *Анализ пользователей:*
    * Определение количества пользователей, совершивших покупку только один раз. 
    *  Анализ среднего количества покупок в неделю у каждого пользователя (по месяцам).
* *Анализ заказов:*
    *  Выявление среднего количества заказов в месяц, не доставленных по разным причинам. 
* *Анализ товаров:*
    * Определение дня недели, когда товар чаще всего покупается.
* *Когортный анализ:*
    * Выполнение когортного анализа пользователей.
    *  Определение когорты с самым высоким retention на 3-й месяц.
* *RFM-сегментация:*
    *  Реализация RFM-сегментации пользователей для качественной оценки аудитории.

##  Стек

<p float="left">
  <img alt="Python" height="50" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Python_logo_and_wordmark.svg/486px-Python_logo_and_wordmark.svg.png" width="169" />
  <img alt="Pandas" height="50" src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Pandas_logo.svg/512px-Pandas_logo.svg.png?20200209204934" width="124" />
  <img alt="Jupyter Notebook" height="50" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Jupyter_logo.svg/44px-Jupyter_logo.svg.png?20190118024747" width="43" />
</p>

## Этапы работы

В проекте были использованы следующие методы анализа:

1. **Сбор и предобработка данных**:
  * Загрузка данных из файлов olist_customers_dataset.csv, olist_orders_dataset.csv, olist_order_items_dataset.csv.
  * Проверка наличия пропусков, дубликатов и некорректных значений, приведение данных к нужным типам.
2. **Анализ пользователей**: 
  * Определение количества пользователей, совершивших покупку только один раз.
    1) Фильтрация заказов, которые считаем покупками
    2) Объединение с таблицей клиентов для получения уникальных customer_id
    3) Группировка по уникальным идентификаторам пользователей и подсчет количества заказов
  * Анализ среднего количества покупок в неделю у каждого пользователя (по месяцам).
    1) Объединение таблицы заказов с таблицей клиентов
    2) Извлечение из столбца order_purchase_timestamp месяца и года
    3) Подсчет количества покупок для каждого пользователя по месяцам с помощью группировки
3. **Анализ заказов**: 
  * Выявление среднего количества заказов в месяц, не доставленных по разным причинам.
    1) Фильтрация заказов со статусами 'canceled' и 'unavailable'
    2) Извлечение года и месяца из order_purchase_timestamp
    3) Группировка по месяцам и статусам
    4) Вычисление среднего количества недоставленных заказов по месяцам для каждого статуса
4. **Анализ товаров**: 
  * Определение дня недели, когда товар чаще всего покупается.
    1) Объединение таблицы заказов с таблицей товарных позиций по order_id
    2) Извлечение дня недели из временной метки покупки
    3) Подсчет количества покупок для каждого товара по дням недели с помощью группировки
    4) Определение самого популярного дня недели для каждого товара с помощью idxmax()
5. **Когортный анализ**:
  * Выполнение когортного анализа пользователей.
    1) Соединение таблиц filtered_orders и customers
    2) Определение временной метки первой покупки каждого пользователя
    3) Добавление столбца с датой первой покупки к заказам
    4) Определение месяца первой покупки
    5) Определение месяца текущего заказа
    6) Создание таблицы для когортного анализа
    7) Переименование периодов для удобства дальнейших расчетов
  * Определение когорты с самым высоким retention на 3-й месяц.
    1) Создание сводной таблицы (столбцы - периоды, строки - месяцы первого заказа) для удобства вычислений
    2) Расчет ретеншна и создание матрицы ретеншна по когортам
    3) Определение когорты с самым высоким retention на 3-й месяц с помощью idxmax() (март 2017 года, 0,393%)
6. **RFM-сегментация**:
  * Реализация RFM-сегментации пользователей для качественной оценки аудитории.
    1) Установление текущей даты для расчета недавности (recency)
    2) Создание датафрейма для метрик RFM (R = текущая дата - дата последней покупки, F = количество заказов, M = сумма оплаты за все заказы)
    3) Разделение метрик на квантильные сегменты
    4) Объединение подсегментов в один, трехзначный
    5) Расчет границ для каждой метрики с помощью квантилей
    6) Создание таблицы интерпретации сегментов

## Результаты

Результаты проекта включают в себя:

• **Определение ключевых метрик**: количество пользователей, среднее количество покупок, количество не доставленных заказов, частота покупок по дням недели.

• **Выявление трендов**: сезонность покупок, динамика количества пользователей, retention пользователей.

• **RFM-сегментация**: выделение сегментов пользователей на основе Recency, Frequency, Monetary. 

Результаты анализа позволили получить глубокое понимание поведения пользователей платформы Olist, что может быть использовано для улучшения работы eCommerce. 

 ##  Используемые данные

Проект использует данные из трех файлов:

* *[olist_customers_dataset.csv](https://disk.yandex.ru/d/QXrVDUoQvFhIcg):*  Таблица с уникальными идентификаторами пользователей.
* *[olist_orders_dataset.csv](https://disk.yandex.ru/d/0zWmh1bYP6REbw):*  Таблица заказов.
* *[olist_order_items_dataset.csv](https://disk.yandex.ru/d/xCsQ0FiC-Ue4Lg):*  Таблица товарных позиций, входящих в заказы.
